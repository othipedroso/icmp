<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vota√ß√µes - ICMP</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <!-- üîπ Navega√ß√£o -->
  <nav class="main-nav">
    <div class="container nav-container">
      <a href="index.html" class="nav-logo">ICMP</a>
      <ul class="nav-links">
        <li><a href="index.html">In√≠cio</a></li>
        <li><a href="quem-cobrar.html">Quem Cobrar?</a></li>
        <li><a href="organograma.html">Organograma</a></li>
        <li><a href="noticias.html">Not√≠cias</a></li>
        <li><a href="votacoes.html" aria-current="page">Vota√ß√µes</a></li>
        <li><a href="missao.html">Nossa Miss√£o</a></li>
      </ul>
    </div>
  </nav>

  <!-- üîπ Cabe√ßalho -->
  <header>
    <div class="container">
      <h1>Vota√ß√µes do Congresso</h1>
      <p>Acompanhe as √∫ltimas decis√µes na C√¢mara e no Senado.</p>
    </div>
  </header>

  <!-- üîπ Conte√∫do -->
  <main class="container">
    <!-- C√¢mara -->
    <section class="section-card">
      <h2>üìä Vota√ß√µes Recentes na C√¢mara</h2>
      <div id="camara-votacoes" class="news-grid">
        <p>Carregando vota√ß√µes...</p>
      </div>
    </section>

    <!-- Senado -->
    <section class="section-card">
      <h2>üèõÔ∏è Vota√ß√µes Recentes no Senado</h2>
      <div id="senado-votacoes" class="news-grid">
        <p>Carregando vota√ß√µes...</p>
      </div>
    </section>
  </main>

  <!-- üîπ Rodap√© -->
  <footer>
    <p>¬© 2024 ICMP - Todos os direitos reservados. Projeto sem fins lucrativos.</p>
  </footer>

  <!-- üîπ Script -->
  <script>
    async function carregarVotacoes(api, containerId) {
      const container = document.getElementById(containerId);
      try {
        const res = await fetch(api);
        if (!res.ok) throw new Error("Erro ao buscar API");
        const votacoes = await res.json();

        if (!votacoes.length) {
          container.innerHTML = "<p>Nenhuma vota√ß√£o encontrada.</p>";
          return;
        }

        container.innerHTML = votacoes.map(v => `
          <div class="news-card">
            <h3>${v.descricao}</h3>
            <p><strong>Data:</strong> ${v.data}</p>
            <p><strong>Resultado:</strong> ${v.resultado}</p>
            ${v.resumo ? `<p><strong>Resumo:</strong> ${v.resumo}</p>` : ""}
            <a href="${v.link}" target="_blank">Ver detalhes</a>
          </div>
        `).join("");
      } catch (err) {
        container.innerHTML = `<p>‚ùå Erro ao carregar vota√ß√µes.</p>`;
        console.error(err);
      }
    }

    carregarVotacoes("/api/votacoes/camara", "camara-votacoes");
    carregarVotacoes("/api/votacoes/senado", "senado-votacoes");
  </script>
</body>
</html>
